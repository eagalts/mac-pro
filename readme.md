# Инструкция для установки дистрибутивов Linux на Mac Pro 1.1 2113 (2006 г.)

---

> [!NOTE]
> **Почему нельзя просто так установить Linux?**
> 
> Mac Pro имеет 64-битный процессор, но 32-битную EFI-прошивку.
Любая попытка загрузки Linux через EFI (grub-efi) не проходит. Технически на него можно поставить 64-битную систему, но для этого придется немного потанцевать с бубном. Благо эта инструкция расширенная, собранная по кусочкам со всего интернета и которая реально помогает норм установить линукс. 

> [!NOTE]
> **Что будет, если не следовать инструкции?**
> 
> Система не встанет, либо встанет, но зависнет на «Loading initial ramdisk …», поэтому важно следовать всем шагам инструкции. 

> [!IMPORTANT]
> **ВНИМАНИЕ!**
>
> Перед тем, как что-то делать, ОБЯЗАТЕЛЬНО ознакомьтесь со всей инструкцией от начала до конца! Прочитайте эту инфструкцию полностью, после чего приступайте к установке.

---

## **1. Подготовка к установке.**

> [!IMPORTANT]
> Для подготовки к установке вам понадобится ПК на Linux (это **ОБЯЗАТЕЛЬНО**), хороший интернет и флешка на 8 гб. Все действия должны выполняться на Linux-машине. **Windows и MacOS НЕ подойдут.** Ниже описано, почему именно такие требования.

> [!TIP]
> Инструкция для установки Windows в самом конце.

### **Шаг 1.** Скачайте образ на Linux-машину строго по ссылкам ниже:

Выберите любой образ из списка ниже и загрузите его.

> [!IMPORTANT]
> Перед скачиванием в браузере или локально на ПК нужно **включить VPN**, иначе загрузка зависает.

### LUBUNTU (LITE UBUNTU):
- Lubuntu 22.04 LXQT (64-bit Mac) – 2.5 GB - <a href="https://stuff.mattgadient.com/linux-mac-iso/lubuntu-22.04-desktop-amd64-mac-mattgadient.com.iso">скачать</a>
- Lubuntu 20.04.1 LXQT (64-bit Mac) – 1.7 GB - <a href="https://stuff.mattgadient.com/linux-mac-iso/lubuntu-20.04.1-desktop-amd64-mac-mattgadient.com.iso">скачать</a>
- Lubuntu 18.04 LXDE (64-bit Mac) – 1.2 GB - <a href="https://stuff.mattgadient.com/linux-mac-iso/lubuntu-18.04.4-desktop-amd64-mac-mattgadient.com.iso">скачать</a>
- Lubuntu 16.04 LXDE (64-bit Mac) – 932 MB - <a href="https://stuff.mattgadient.com/linux-mac-iso/lubuntu-16.04.6-desktop-amd64-mac-mattgadient.com.iso">скачать</a>

### XUBUNTU (XFCE UBUNTU):
- Xubuntu 18.04 XFCE (64-bit Mac) – 1.5 GB - <a href="https://stuff.mattgadient.com/linux-mac-iso/xubuntu-18.04.4-desktop-amd64-mac-mattgadient.com.iso">скачать</a>

### UBUNTU:
- Ubuntu 22.04 Desktop (64-bit Mac) – 3.5 GB - <a href="https://stuff.mattgadient.com/linux-mac-iso/ubuntu-22.04-desktop-amd64-mac-mattgadient.com.iso">скачать</a>
- Ubuntu 20.04 Desktop (64-bit Mac) – 2.6 GB - <a href="https://stuff.mattgadient.com/linux-mac-iso/ubuntu-20.04-desktop-amd64-mac-mattgadient.com.iso">скачать</a>
- Ubuntu 18.04 Desktop (64-bit Mac) – 2.0 GB - <a href="https://stuff.mattgadient.com/linux-mac-iso/ubuntu-18.04.4-desktop-amd64-mac-mattgadient.com.iso">скачать</a>
- Ubuntu 16.04 Desktop (64-bit Mac) – 1.6 GB - <a href="https://stuff.mattgadient.com/linux-mac-iso/ubuntu-16.04.6-desktop-amd64-mac-mattgadient.com.iso">скачать</a>

Эти старые **НЕ модифицированные** версии с оф. сайта стоит попробовать, если на вашем Mac стоит выделенная видеокарта (ATI/nVidia), и более новые дистрибутивы с ней не работают:

- Ubuntu 14.04.4 Desktop (64-bit Mac) - <a href="http://old-releases.ubuntu.com/releases/14.04.5/ubuntu-14.04.4-desktop-amd64+mac.iso">скачать</a>
- Ubuntu 12.04.4 Desktop (64-bit Mac) - <a href="http://old-releases.ubuntu.com/releases/12.04.4/ubuntu-12.04.4-desktop-amd64+mac.iso">скачать</a>

Если эти старые версии запустятся, то потом можно будет, опираясь на их успех, экспериментировать с параметрами загрузки (например, `nomodeset`) для запуска более современных систем.

### LINUX MINT
- Linux Mint 22 XFCE “Wilma” (64-bit Mac) – 2.7 GB - [скачать](https://stuff.mattgadient.com/linux-mac-iso/linuxmint-22-xfce-64bit-mac-mattgadient.com.iso)
- LMDE 6 (64-bit Mac) – 2.6 GB - [скачать](https://stuff.mattgadient.com/linux-mac-iso/lmde-6-cinnamon-64bit-mac-mattgadient.com.iso)
- Linux Mint 21 Cinnamon “Vanessa” (64-bit Mac) – 2.3 GB - [скачать](https://stuff.mattgadient.com/linux-mac-iso/linuxmint-21-cinnamon-64bit-mac-mattgadient.com.iso)
- Linux Mint 20 Cinnamon “Ulyana” (64-bit Mac) – 1.9 GB - [скачать](https://stuff.mattgadient.com/linux-mac-iso/linuxmint-20-cinnamon-64bit-mac-mattgadient.com.iso)
- Linux Mint 19.3 Cinnamon “Tricia” (64-bit Mac) – 1.9 GB - [скачать](https://stuff.mattgadient.com/linux-mac-iso/linuxmint-19.3-cinnamon-64bit-mac-mattgadient.com.iso)
- Linux Mint 19.3 XFCE “Tricia” (64-bit Mac) – 1.9 GB - [скачать](https://stuff.mattgadient.com/linux-mac-iso/linuxmint-19.3-xfce-64bit-mac-mattgadient.com.iso)


### ELEMENTARY OS
- Elementary OS 5.1 “Hera” (64-bit Mac) – 1.4 GB - [скачать](https://stuff.mattgadient.com/linux-mac-iso/elementaryos-5.1-stable.20200405-mac-mattgadient.com.iso)


### FEDORA
- Fedora 31 Workstation Live (64-bit Mac) – 1.8 GB - [скачать](https://stuff.mattgadient.com/linux-mac-iso/Fedora-Workstation-Live-x86_64-31-1.9-mac-mattgadient.com.iso)
- Fedora 31 XFCE Live (64-bit Mac) – 1.4 GB - [скачать](https://stuff.mattgadient.com/linux-mac-iso/Fedora-Xfce-Live-x86_64-31-1.9-mac-mattgadient.com.iso)


### EMMABUNTUS
- Emmabuntus Debian Edition 4 (Debian 11 XFCE/LXQt) (64-bit Mac) – 3.5 GB - [скачать](https://stuff.mattgadient.com/linux-mac-iso/emmabuntus-de4-amd64-11.2-1.01-mac-mattgadient.com.iso)


### DEBIAN
- Debian 10.3.0 Live Gnome + non-free (64-bit Mac) – 2.9 GB - [скачать](https://stuff.mattgadient.com/linux-mac-iso/debian-live-10.3.0-amd64-gnome+nonfree-mac-mattgadient.com.iso)
- Debian 10.3.0 Live XFCE + non-free (64-bit Mac) – 2.7 GB - [скачать](https://stuff.mattgadient.com/linux-mac-iso/debian-live-10.3.0-amd64-xfce+nonfree-mac-mattgadient.com.iso)

> [!TIP]
> `non-free` — это пакеты с ПО или драйверами, у которых есть ограничения по использованию или распространению (например, платная лицензия или запрет на изменение кода). Они часто нужны для работы WiFi, звука или графики на некоторых компьютерах. Это критически важно, потому что без этих пакетов железо может просто не заработать.

> [!IMPORTANT]
> Если вы хотите использовать установщик `netinst` (очень маленький образ для установки Debian *(около 500 МБ)*, который скачивает все остальные компоненты системы из интернета во время установки) и у вас **нет** `non-free` прошивки, Debian предоставляет **официальный образ** `debian-mac-x.x.x-amd64-netinst.iso`, который можно найти [на оф. сайте (клик)](https://cdimage.debian.org/cdimage/release/current/amd64/iso-cd/). Важно понимать, что с таким образом **успешная установка, запуск или работа ОС не гарантируется никем и ничем**. В таком случае нужно **ОБЯЗАТЕЛЬНО подключить проводной интернет** и попробовать установку с ним.

> [!TIP]
> *Не проверялось.* Официальный образ Debian `netinst` "multi-arch" (amd64 + i386) часто содержит нужные загрузчики и грузится с USB без модификаций.

### ZORIN
- Zorin OS 17.1 Core (64-bit Mac) – 3.2 GB - [скачать](https://stuff.mattgadient.com/linux-mac-iso/Zorin-OS-17.1-Core-64-bit-r2-mac-mattgadient.com.iso)


### TRUENAS
- TrueNAS SCALE 25.04.2.3 (64-bit Mac) – 1.9 GB - [скачать](https://stuff.mattgadient.com/linux-mac-iso/TrueNAS-SCALE-25.04.2.3-mac-mattgadient.com.iso)


### MANJARO
- Manjaro Cinnamon 21.3.7 (64-bit Mac) – 3.3 GB - [скачать](https://stuff.mattgadient.com/linux-mac-iso/manjaro-cinnamon-21.3.7-220826-linux515-mac-mattgadient.com.iso)

> [!IMPORTANT]
> Если нужно скачать другой образ, либо никакой из этих не понравился, то это можно сделать. Однако придётся подготовить образ перед установкой. Без нужной подготовки установить образ **НЕВОЗМОЖНО**. Готовые образы выше **гарантированно** работают (при правильной записи и установке), при этом кастомизированные вручную образы (по инструкции ниже) могут не заработать из-за несовместимости. По этой причине **надёжнее всего и лучше использовать ГОТОВЫЕ образы**.

### ПОДГОТОВКА СВОЕГО ОБРАЗА

1. Для начала скачайте любой образ операционной системы Linux той версии, которая необходима.
2. Скачайте программу по этой [ссылке](https://mattgadient.com/dl/linux-iso-program/linux/isomacprog.gz).
3. При помощи терминала распакуйте образ **программы**. Например, если она находится в папке пользователя - Downloads, то распаковка будет выглядеть так:
```
cd ~/Downloads
gunzip isomacprog.gz
chmod +x isomacprog
```
4. Уже на этом этапе программа должна работать. Проверяем так:
```
./isomacprog
```
5. Если видим `No iso name assigned`, то всё работает исправно. Если это не сработает и вы получите непонятную ошибку, скорее всего, придётся скомпилировать программу самостоятельно, следуя инструкциям в разделе **Компиляция**.
6. Сделаем дубликат исходного образа. `original.iso` замените на название вашего образа ЛИБО переименуйте скачанный образ в `original.iso`.
```
cp original.iso macversion.iso
```
7. Приступим к модификации образа. Исходный образ остаётся нетронутым.
```
./isomacprog macversion.iso
```
8. Если всё успешно, то за 1-2 секунды (в редких случаях до 5-10 секунд) всё будет готово. 
9. Проверьте, что фактически изменения были применены. Для этого сравните md5-сумму исходного образа `original.iso` и md5-сумму готового образа `macversion.iso` следующими командами:
```
md5sum original.iso
md5sum macversion.iso
```
10. Если суммы разные, значит, изменения применились. Если они совпадают, то образ НЕ модифицирован. Значит, не повезло. Пробуем другой образ или дистрибутив. Да, это не всегда прокатывает. В случае, если хэши разные, то по инструкции ниже всё закатываем в флешку и приступаем к установке. 

> [!CAUTION]
> Обратите внимание, что тот факт, что программа успешно модифицировала ISO-образ, **не означает**, что сам дистрибутив будет работать — вы не узнаете наверняка, пока не попробуете установить его. Стандартные LTS-релизы Ubuntu обычно работают (более старые версии имеют более высокий процент успеха). Arch и дистрибутивы на основе Arch (Manjaro и т. д.) имеют **очень низкий процент успеха** и часто требуют ручной работы для запуска загрузчика.

### КОМПИЛЯЦИЯ

> [!CAUTION]
> Информация предназначена для ручной компиляции программы для модификации загрузочного ISO образа.
>
> **НЕ ЧИТАЙТЕ ЭТОТ РАЗДЕЛ, если вы скачали готовый модифицированный ISO-образ или если у вас уже получилось модифицировать через программу**.

Проблема с 32-битными Mac с EFI заключается в том, что они начинают давать сбои при попытке загрузки образа диска с поддержкой нескольких каталогов. Большинство дистрибутивов Linux используют образы с поддержкой нескольких каталогов, чтобы поддерживать как BIOS, так и EFI. Когда Mac пытается загрузить образ диска, появляется загадочный текст «выберите тип загрузки CD-ROM». Поскольку Mac ещё не загрузил никаких элементов управления клавиатурой, вы фактически не можете выбрать ни один из вариантов. 

Самое частое решение — изменить образ диска на образ только с BIOS (без EFI). Именно так поступали старые ISO-образы Ubuntu amd64+mac. В этом случае запускается 64-битный загрузчик Linux с BIOS, и всё работает нормально. Более подробное объяснение можно найти [здесь](http://askubuntu.com/questions/37999/what-is-different-about-the-mac-iso-image#answers) (английский).

**Приступим к конвертации.**

Перед выполнением убедитесь, что у вас установлен С-компилятор.

1. Скачайте код отсюда: [ссылка](https://mattgadient.com/dl/linux-iso-program/isomacprog.c.txt).
2. Переименуйте файл в `isomacprog.c`, убрав `.txt` на конце.
3. Скомпилируйте файл:
```
cc -g -Wall isomacprog.c -o isomacprog
```
4. Вернитесь к предыдущему разделу `ПОДГОТОВКА СВОЕГО ОБРАЗА` и продолжите с 4-го этапа.

### ПАРУ СЛОВ ОБ ОПЕРАНЦИОНКАХ 
Ниже приведены (по отзывам других счастливчиков старых Mac'ов) неплохие ОС, которые работают стабильно и устанавливаются без проблем:
- MX Linux: Абсолютный фаворит последних лет. Работает шустро, ставится легко (как 32-битная, так и модифицированная 64-битная версии).
- Debian (особенно версия с MATE или XFCE): Очень стабилен, хорошо поддерживает старое железо. Рекомендуют ставить через netinst.
- LMDE (Linux Mint Debian Edition): Работает быстрее и стабильнее, чем обычный Mint на базе Ubuntu, на этих старых машинах.
- Linux Mint (версии 19.3, 20, 21): Популярен, но версия Cinnamon может быть тяжеловата. Лучше брать MATE или XFCE.
- Zorin OS Lite: Хвалят за скорость и красивый интерфейс на старом железе.
- AntiX: Для совсем слабых машин (например, с 1-2 ГБ ОЗУ).

В Arch в GRUB опция загрузки через 32bit EFI. Но это **не проверялось** - по отзывам с форумов нужно использовать `isomacprog` на образе Arch, загрузиться, разметить диск вручную через `fdisk` (создать `BIOS boot partition`), и при установке `GRUB` использовать команду `grub-install --target=i386-pc /dev/sda`.

Установить можно даже официальный ISO Windows 10 через скрипт `isomacprog`, записать на USB, и успешно установить. По комментариям на форумах это сработало на iMac 6,1 в режиме Legacy BIOS. Подробнее об установке Windows расписано в конце.

Некоторые смогли установить Windows 11 на Mac Pro 1.1. Об этом свидетельствуют видео на Youtube. Подробной инструкции нет. О том, как она работает на таком железе, тоже ничего не известно. 


### **Шаг 2.** Запишите образ на юсб

> [!CAUTION]
> **Неправильная запись, скип части или всей инструкции приведут к невозможности загрузки с флешки или успешной установки с неё!**

> [!CAUTION]
> На форумах также встречается вариант записи через Ventoy или YUMI-UEFI. Подробнее о них рассказали в разделе `Troubleshooting`. **Эти способы не помогут вам реально записать образ на флешку, лучше не тратить своё время**. По инструкции ниже всё получится.

> [!TIP]
> Чем меньше флешка, тем лучше. Главное, чтобы:
> - записанный образ полностью помещался на юсб;
> - флешка была 2.0, а не 3.0;
> - флешка была небольшого обьема, т.к. чем больше объём флешки, тем больше времени уйдёт на её подготовку.

> [!TIP]
> Оптимально использовать флешку на 8 гб. 

1. Понадобится любой ПК на Linux (win и mac **не** подойдут)
2. Откройте терминал и введите команду:
```
lsblk
```
3. Вставьте USB-накопитель на 8 гб без важных данных (все будет потеряно!) и введите:
```
lsblk
```
4. Cравните с результатом на шаге 2. Разница между результатами обусловлена ​​новым вставленным накопителем. В качестве примера пусть флешка называется `sdb`, поэтому во всех след. командах будет фигурировать именно это.
5. **Чрезвычайно (!) важно заменить `sdb` на название реальной флешки, дабы случайно не перезаписать другие установленные накопители и жесткие диски!**
6. Откройте терминал и введите (придётся несколько подождать, пока флешка полностью не отформатируется. Чем меньше флешка, тем быстрее она отформатируется. Ждём до конца):
```
sudo dd if=/dev/zero of=/dev/sdb status-progress
```
7. Теперь нам нужно присвоить всей флешке `MBR/msdos`:
```
sudo fdisk /dev/sdb
o
w
```
8. На флешке создаём загрузочный EFI раздел
```
sudo fdisk /dev/sdb
n
p
1
2048
+36M
w
```
9. Теперь немного подумаем: какой будет самый большой образ Linux Live ISO, который вы поместите на эту флешку? К примеру возьмём Lubuntu, размер которой составляет около **1,1 ГБ**, поэтому **1700 МБ** будет более чем достаточно. Если нужно больше - ставим столько, сколько нам хватит.
10. Создаём раздел для самой оси, где `+1700M` - размер нашего раздела с ос:
```
sudo fdisk /dev/sdb
t
ef
n
p
2
75776
+1700M
a
1
w
```

11. Запустите программу GParted
- GParted - Refresh devices
- GParted - Devices - /dev/**sdb**
- Щелкните ПКМ на первый раздел - Format as - FAT32
- Установите флажок "Apply all operations"
12. Нам нужно смонтировать диск вручную, ибо Linux не монтирует разделы EFI сам:
```
mkdir /tmp/sdb1
sudo mount -o rw /dev/ sdb 1 /tmp/sdb1
```
13. Создаём две папки для загрузчика на USB-флешке
```
sudo mkdir -p /tmp/sdb1/boot/grub/
sudo mkdir -p /tmp/sdb1/efi/boot/
```
14. Создаём и открываем в текстовом редакторе `nano` файл конфигурации загрузчика `GRUB`
```
sudo nano /tmp/sdb1/boot/grub/grub.cfg
```
15. Копипастим в только что открывшийся `nano`-редактор:
```
search --file --set=root /boot/grub/loopback.cfg
configfile /boot/grub/loopback.cfg
```
16. Выходим из `nano` с сохранением настроек.
17. Скачиваем 32-х битный EFI загрузчик через `wget` (если возникли траблы со скачиванием так, от можно скачать вручную с гит-репозитория, нажав [сюда](https://github.com/jfwells/linux-asus-t100ta/raw/master/boot/bootia32.efi)):
```
wget https://github.com/jfwells/linux-asus-t100ta/raw/master/boot/bootia32.efi
```
18. Скопируйте этот файл из папки загрузок и отмонтируйте диск:
```
sudo cp /home/stefan/Downloads/bootia32.efi /tmp/sdb1/efi/boot/
sync
sudo umount /tmp/sdb1
```
19. Поместите ISO-образ на второй раздел флешки. Замените `/path/to/lubuntu.iso` на реальный путь до установочного ISO-файла.
```
sudo dd if=/path/to/lubuntu.iso of=/dev/sdb 2 bs=1M
```
20. Флешка записана, приступаем к установке. Перед тем, как что-то делать, настоятельно рекомендуется **прочитать инструкцию до конца**, а затем приступать.

## 2. Установка с флешки 
Выполняйте **строго по порядку**:
- Обеспечиваем проводное LAN-соединение с интернетом, вставив ethernet-кабель в мак;
- Вставляем флешку в мак (лучше на переднюю панель, оттуда проще вытащить);
- Включаем мак, нажав на кнопку на передней панели;
- СРАЗУ зажимаем Alt и держим до появления характерного меню загрузки;
- Грузимся с флешки (она называется EFI и имеет жёлто-оранжевый цвет, но НЕ серый);
- Ждём около минуты. Процесс не быстрый. На экране должно появиться "Try Ubuntu ...";
- Нажимаем на клавишу `e` (русская `у`);
- Откроется очень простой редактор. На экране мы должны найти строчку `quiet splash` и отредактировать её: `quiet nomodeset noefi nosplash`. Можно добавить `toram`, тогда установщик с флешки загрузится в ОЗУ и можно будет чуть быстрее установить ось;
- Нажимаем на `F10` и ждём пару-тройку минут, пока не загрузится установщик;
- Ставим ОС на диск ОБЯЗАТЕЛЬНО с разделом `MBR` (он же `dos`), но никак **НЕ GPT**;
- **Не** устанавливайте `GRUB` в `EFI`, только в `MBR/BIOS mode`;
- После установки выключите ПК, войти в ОС **не пытаемся**. 

Затем загрузитесь с флешки в Live USB (Try without installing). Live USB нужен для исправления загрузчика.

> [!IMPORTANT]
> Если при загрузке USB возникает зависание или другие неприятные проблемы, то нужно в параметры запуска добавить
> `nomodeset noefi quiet nosplash`
> и/или
> `nomodeset noapic`

---

## 3. Установка загрузчика

**Шаг 0.** Находим id диска

```bash
sudo fdisk -l
```

на примере основной диск - sda1, то:

- проверяем, что диск реально в MBR, т.е. dos:
```bash
sudo fdisk -l /dev/sda
```
- маунт системы:
```bash
sudo mount /dev/sda1 /mnt
sudo mount --bind /dev /mnt/dev
sudo mount --bind /proc /mnt/proc
sudo mount --bind /sys /mnt/sys
sudo mount --bind /run /mnt/run
```
- проверяем, что есть bash:
```bash
ls /mnt/bin/bash
```
**Шаг 1.** если все ок, то переходим внутрь ос
```bash
sudo chroot /mnt /bin/bash
```
**Шаг 2.** Устанавливаем Legacy/BIOS GRUB
```bash
apt update
apt install grub-pc -y
grub-install /dev/sda
update-grub
```
**Шаг 3.** Устанавливаем rEFInd
```bash
apt install rEFInd 
Y
Yes - Enter
sudo refind-install
```
**Шаг 4.** Отключаем старый efi
```bash
mv /boot/efi/EFI /boot/efi/EFI.disabled
```
**Шаг 5.** Выход
```bash
exit
sudo umount /mnt/dev
sudo umount /mnt/proc
sudo umount /mnt/sys
sudo umount /mnt/run
sudo umount /mnt
```
---

## 4. Загрузка в ОС

- **шаг 1.** выключить пк
- **шаг 2.** извлечь юсб
- **шаг 3.** запуск пк с Alt - выбрать легаси загрузчик или windows
- **шаг 4.** после успешной загрузки рекомендую обновить `initramfs`:
```bash
sudo update-initramfs -u -k all
```

## 5. Troubleshooting

> [!CAUTION]
> **ОС нельзя обновлять!**
>
> При обновлении ядра (kernel) стандартный менеджер обновлений (apt/dnf) перегенерирует конфигурацию GRUB. Он видит 64-битную систему и пытается прописать туда 64-битный EFI загрузчик, который этот Мак не понимает.

**Высокая загрузка CPU и тормоза (IRQ Storm)**

*   *Симптом:* Система тормозит, одно ядро загружено на 100% процессом `kworker`, вентиляторы шумят.
*   *Причина:* Конфликт ACPI прерываний (часто GPE11 или GPE17).
*   *Решение:* Добавить в параметры загрузки GRUB (`/etc/default/grub`) строку:
    `acpi_mask_gpe=0x17` (или `0x11` для Mac Pro 1,1).
    Это возвращает старым Макам былую скорость.

**Видеокарты (Nvidia 7300GT / ATI X1600)**
*   Это больная тема iMac и Mac Pro.
*   *Решение:* Если графика "сыпется" или черный экран — используйте параметр `nomodeset` при загрузке. Для старых карт Nvidia (версии драйверов 304/340) поддержка в новых ядрах Linux (5.4+) сломана или отсутствует. Лучше использовать **дистрибутивы постарше** (на базе Ubuntu 16.04/18.04) или Debian, где проще зафиксировать старое ядро.

**Видеокарты (иные)**
* *Проблема:* Обычные видеокарты от ПК не имеют прошивки Apple EFI.
* *Симптом:* При включении компьютера экран будет черным до момента полной загрузки драйверов Linux/Windows. Вы не увидите "яблока", меню выбора диска (Alt) или ошибок BIOS.
*   *Решение:* Держать родную карту Nvidia 7300GT в слоте только для того, чтобы видеть меню загрузки в экстренных случаях, или прошивать карту "Mac EFI" биосом (рискованно).

**При включении Мак долго (30 сек) висит на белом экране, прежде чем начать грузить Linux.**
*   *Причина:* EFI ищет macOS.
*   *Решение (Bless):* Если у вас остался раздел с macOS, можно загрузиться туда и через терминал выполнить команду `bless` на раздел с Linux. Если macOS стерта — придется смириться или загрузиться с установочного диска OS X и сделать это оттуда.

### **Важно про запись ISO на флешку!**
На форумах рассказывают, что зашить ISO можно не по инструкции выше, а через Ventoy. Это **не сработает так, как нужно**: на практике это помогает очень редко. 

По умолчанию Ventoy устанавливает на флешку универсальный набор, но приоритет отдает 64-битному загрузчику (bootx64.efi), так как 99% современных ПК используют его. Результат: Мак просто "не видит" флешку как загрузочное устройство, потому что не находит понятного ему файла запуска в стандартном месте.

Даже если вам удалось заставить Мак увидеть меню Ventoy (например, подкинув файл bootia32.efi вручную), мак просто зависает на чёрном экране. 

Единственное, что может получиться записать через Ventoy - сильно старые версии Linux или Debian Multi-arch.

---

Также на форумах иногда можно услышать про YUMI-UEFI.

Программа YUMI-UEFI сработает только для установки Win10, о чём ниже и рассказано. На практике это **НЕ сработает** для Linux-систем. Связано это с тем, что в YUMI-UEFI нет возможности без костылей напрямую поставить необходимые параметры для загрузки Linux-системы (`nomodeset` и прочие).

## 6. Установка Windows 10

* **Метод 1: Модифицированный**
1. Скачайте официальный ISO образ Windows 10 64-bit.
2. Используйте утилиту `isomacprog` (ту же, что для Linux), чтобы пропатчить образ Windows. Это уберет UEFI-загрузчик. Подробнее об этом расписано на этапе `ПОДГОТОВКА СВОЕГО ОБРАЗА`.
3. Запишите образ на USB аналогично инструкции выше.
4 .Загрузитесь с зажатым Alt (Option). Выберите диск "Windows".
5. Установка пойдет в режиме Legacy BIOS (эмуляция BIOS).

**Важно:** Диск должен быть размечен в MBR, а не GPT. Установщик Windows 10 может ругаться, что "на этот диск нельзя установить", если он в GPT. Придется удалить все разделы в установщике.

* **Метод 2: YUMI UEFI (с флешки)**
1. На Windows-ПК используйте программу YUMI-UEFI.
2. Запишите образ Windows 10.
3. Эта утилита создает специальный загрузчик, который понятен 32-битному EFI мака.

**Проблемы Windows 10 на этом железе:**
- Драйверы: Самая большая боль — звук (Cirrus Logic или Realtek). Придется искать старые драйверы от Boot Camp 4.0 или 5.1 и ставить их в режиме совместимости с Windows 7.

## 7. Дополнительный способ установки

Если установить по инструкции выше не удалось, то можно установить другим способом. 

Для этого вам понадобится любой другой **стационарный ПК** или **СТАРЫЙ ноутбук**. При этом модифицированный ISO не нужен. Достаточно самого обычного, оригинального образа с официального сайта (Ubuntu, Mint, Debian и т.д.).

Инструкция распространяется только для Linux-систем.

1. Достаньте SSD/HDD из Мака.
2. Вставьте этот диск в "донорский" ПК. Отключите другие диски донора, чтобы случайно их не стереть.
3. Установка
- Загрузите установочную флешку Linux (например, Mint, MX Linux или Debian) на донорском ПК.
- Начните установку.

**В разметке диска выберите ручную разметку или убедитесь, что установщик создает таблицу разделов `MS-DOS` (`MBR`), а не `GPT`.**

- Создайте один раздел `ext4` (корень `/`) и, при желании, `swap`.
- Укажите место для установки загрузчика `GRUB`: в `MBR` этого диска (обычно `/dev/sda`, без цифр).
- Дождитесь окончания установки. Выключите ПК.

4. Верните диск обратно в Мак.
5. Включите Мак, зажав Alt (Option). Вы увидите иконку жесткого диска с подписью "Windows". Это и есть ваш Linux. Выбирайте его — система загрузится.

## 8. Proxmox на Mac Pro 1.1
Если у вас Mac Pro 1,1 (прошитый в 2,1) и в нем установлено 64 ГБ ОЗУ — Proxmox VE имеет огромный смысл.

Это превращает старый "обогреватель" в мощный домашний сервер или лабораторный стенд.

**Плюсы:**
- Ресурсы: Два процессора Xeon (обычно X5355 или X5365, 8 ядер суммарно) + 64 ГБ памяти — это очень солидно для виртуализации контейнеров (LXC) и легких VM.
- Стабильность: Это серверное железо, оно рассчитано на работу 24/7.

**Минусы/Ограничения:**
- Энергопотребление: Эти старые Xeon'ы жрут электричество как не в себя.
- Инструкции CPU: Процессоры того времени не поддерживают новые наборы инструкций (например, AVX/AVX2). Некоторый современный софт (например, новые версии MongoDB, TensorFlow) внутри виртуальных машин может не запуститься.

**Установка:**
- Стандартный установщик Proxmox (ISO) не загрузится на Mac Pro 1,1 напрямую, так как он требует UEFI 64-bit.
- Самый надежный путь — это установка поверх Debian.
- Установите чистый Debian 11 или 12.
- Настройте сеть (стат. IP).
- Подключите репозитории Proxmox и установите пакеты Proxmox VE поверх Debian по официальной инструкции.

## 9. Источники и ссылки
**Исходные образы, инструкция по формированию образа:**
- Linux DVD images (and how-to) for 32-bit EFI Macs (late 2006 models) - [ссылка](https://mattgadient.com/linux-dvd-images-and-how-to-for-32-bit-efi-macs-late-2006-models/)

**Исходный код модификатора ISO-образов:**
- Ubuntu CD Images - [ссылка](https://bugs.launchpad.net/ubuntu-cdimage/+bug/1298894/comments/16)

**Инструкция по записи образа на USB:**
- Live CD on an USB Stick (32-bit EFI, 64-bit Linux) - [ссылка](http://mesom.de/efi32boot/index.html)
